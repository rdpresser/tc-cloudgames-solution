# ClusterSecretStore - Azure Key Vault integration
# This allows all namespaces to access secrets from Azure Key Vault
# Requires: External Secrets Operator installed in cluster
# Authentication: Uses Azure Workload Identity (production) or Service Principal (dev)
apiVersion: external-secrets.io/v1
kind: ClusterSecretStore
metadata:
  name: azure-keyvault
  labels:
    app.kubernetes.io/part-of: cloudgames
    app.kubernetes.io/component: secrets
spec:
  provider:
    azurekv:
      # Key Vault URL - will be overridden by overlay
      vaultUrl: "https://placeholder.vault.azure.net"
      # Default: Service Principal (for dev)
      # Production overlay switches to Workload Identity
      authSecretRef:
        clientId:
          name: azure-sp-credentials
          namespace: external-secrets
          key: clientId
        clientSecret:
          name: azure-sp-credentials
          namespace: external-secrets
          key: clientSecret

