# =============================================================================
# ClusterSecretStore for Production - Azure Workload Identity (REPLACE)
# =============================================================================
# This REPLACES the base ClusterSecretStore with production Workload Identity config
# No credentials needed - uses ServiceAccount annotations for Azure auth
# =============================================================================
apiVersion: external-secrets.io/v1
kind: ClusterSecretStore
metadata:
  name: azure-keyvault
  labels:
    app.kubernetes.io/part-of: cloudgames
    app.kubernetes.io/component: secrets
    environment: prod
spec:
  provider:
    azurekv:
      vaultUrl: "https://tccloudgamesdevcr8nkv.vault.azure.net"
      # Production: Use Workload Identity (no secrets)
      authType: WorkloadIdentity
      serviceAccountRef:
        name: external-secrets-operator
        namespace: external-secrets
